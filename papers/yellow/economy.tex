\section{Economic survivability}

We outline following two properties required for long-term survivability of the chain:

\begin{itemize}
    \item{} coins protected by keys being lost should be returned into circulation.
    Otherwise, after the end of the emission period, amount of the coins
    in the circulation will always decrease and eventually reach zero.
    \item{} nothing should be kept in the state forever and for free.
    Otherwise, the size of the state is always increasing with time, thus reducing clients performance.
\end{itemize}

To achieve this, we propose the following storage fee consensus rules.
Register $R3$ of a box contains tuple $(creation\_height, tx\_id || out\_num)$, where $creation\_height$ provided by a user
is used to determine the block height at the moment of transaction generation.
Transaction can only be put in the block of height $h$ if for every created box its $creation\_height \le h$.

Once the subsidized period for the box ends (that is,
$current\_block\_height \ge box.creation\_height + SP$, see $SP$ value below), anyone~(presumably, a miner) can
create a new box $out$ with the exactly the same content (including the guarding
script) except the monetary value and $R3$ contents. The monetary value is to
reduced by $K \cdot B$ maximum, where $B$ is the spent box~($self$)
size and $K$ is the storage cost for the period $SP$. Thus, the difference is to be paid to the miner.
If box value is less that the storage fee, all the box content including tokens could be spent by the miner.

For efficient lookup~(to find a proper output regarding an expired input without an iteration over transaction outputs),
we require a spending proof for an expired box to be just a context extension which contains only an index of an
output which is trying to spend the box. The variable identifier for the index in the extension is $127$.

We propose the following concrete parameters:
\begin{itemize}
    \item{} $SP$ - length of a period for which box can be stored in a State for free untouched.
    It is a constant, namely, $SP = 1051200 \approx 4$ years.
    \item{} $K$ - cost of storage of 1 byte of data in a State for 1 block.
    Should be determined by miner votes, $1250000 (nanoErg/SP)$ by default, max value is $2500000$.
\end{itemize}

\knote{Provide a script}