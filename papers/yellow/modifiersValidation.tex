\section{Ergo Modifiers Validation}
\label{sec:validation}

This section contains a list with all consensus-critical validation rules that should be performed by every node in the network,
rules that are not listed in this table should not be considered as consensus-critical and enforced by the network.

Every rule is enumerated and is initially activated.
Rules that could not lead in money printing and are not enforced by serializers may be disabled later by a miner
voting via soft forks, while new rules may also be added at the same time.


% DON'T EDIT THIS TABLE.
% it is auto-generated by org.ergoplatform.tools.ValidationRulesPrinter

\textbf{Transaction validation:}


\begin{tabular}{ |p{1.0cm}||p{7.5cm}|p{1.0cm}|p{1.0cm}|p{2.5cm}| }
    \hline
Id & Validation rule & Soft-forkable & Active & Modifiers \\
\hline
    100 & A transaction should have at least one input. & \xmark & \cmark & ErgoTransaction \\
    \hline
    101 & A transaction should have at least one output. & \xmark & \cmark & ErgoTransaction \\
    \hline
    102 & A number of transaction inputs should not exceed 32767. & \xmark & \cmark & ErgoTransaction \\
    \hline
    103 & A number transaction data inputs should not exceed 32767. & \xmark & \cmark & ErgoTransaction \\
    \hline
    104 & A number of transaction outputs should not exceed 32767. & \xmark & \cmark & ErgoTransaction \\
    \hline
    105 & Erg amount for a transaction output should not be negative. & \xmark & \cmark & ErgoTransaction \\
    \hline
    106 & Sum of transaction output values should not exceed 9223372036854775807. & \xmark & \cmark & ErgoTransaction \\
    \hline
    107 & There should be no duplicate inputs. & \xmark & \cmark & ErgoTransaction \\
    \hline
    108 & All token amounts of transaction outputs should be positive. & \xmark & \cmark & ErgoTransaction \\
    \hline
    109 & A number of tokens within a box should not exceed 255 and sum of assets of one type should not exceed 9223372036854775807. & \xmark & \cmark & ErgoTransaction \\
    \hline
    111 & Every output of the transaction should contain at least <minValuePerByte * outputSize> nanoErgs. & \cmark & \cmark & ErgoTransaction \\
    \hline
    112 & Transaction outputs should have creationHeight the does not exceed the block height. & \xmark & \cmark & ErgoTransaction \\
    \hline
    113 & Every input of the transaction should be in UTXO. & \xmark & \cmark & ErgoTransaction \\
    \hline
    114 & Every data input of the transaction should be in UTXO. & \xmark & \cmark & ErgoTransaction \\
    \hline
    115 & Sum of transaction inputs should not exceed 9223372036854775807. & \xmark & \cmark & ErgoTransaction \\
    \hline
    116 & Amount of Ergs in inputs should be equal to amount of Erg in outputs. & \xmark & \cmark & ErgoTransaction \\
    \hline
    117 & For every token, its amount in outputs should not exceed its amount in inputs. & \xmark & \cmark & ErgoTransaction \\
    \hline
    119 & Scripts of all transaction inputs should pass verification. & \xmark & \cmark & ErgoTransaction \\
    \hline
\end{tabular}


\textbf{Header validation:}


\begin{tabular}{ |p{1.0cm}||p{7.5cm}|p{1.0cm}|p{1.0cm}|p{2.5cm}| }
    \hline
Id & Validation rule & Soft-forkable & Active & Modifiers \\
\hline
    200 & Genesis header should have genesis parent id. & \xmark & \cmark & Header \\
    \hline
    201 & Genesis header id should be equal to id from the config. & \xmark & \cmark & Header \\
    \hline
    203 & Genesis height should be 1. & \xmark & \cmark & Header \\
    \hline
    205 & Header timestamp should be greater than the parent's. & \xmark & \cmark & Header \\
    \hline
    206 & A header height should be greater by one than the parent's. & \xmark & \cmark & Header \\
    \hline
    207 & A header should contain correct PoW solution. & \xmark & \cmark & Header \\
    \hline
    208 & A header should contain correct required difficulty. & \xmark & \cmark & Header \\
    \hline
    209 & A header height should not be older than current height minus <config.keepVersions>. & \xmark & \cmark & Header \\
    \hline
    210 & Parent header should not be marked as invalid. & \xmark & \cmark & Header \\
    \hline
    212 & Number of non-zero votes should be <= 2. & \cmark & \cmark & Header \\
    \hline
    213 & A header votes should contain no duplicates. & \xmark & \cmark & Header \\
    \hline
    214 & A header votes should contain no contradictory votes. & \xmark & \cmark & Header \\
    \hline
    215 & A header should not contain votes for unknown parameters. & \cmark & \cmark & Header \\
    \hline
\end{tabular}


\textbf{Block sections validation:}


\begin{tabular}{ |p{1.0cm}||p{7.5cm}|p{1.0cm}|p{1.0cm}|p{2.5cm}| }
    \hline
Id & Validation rule & Soft-forkable & Active & Modifiers \\
\hline
    300 & Double application of a modifier is prohibited. & \xmark & \cmark & Header, ADProofs, Extension, BlockTransactions \\
    \hline
    302 & Block sections should correspond to the declared header. & \xmark & \cmark & ADProofs, Extension, BlockTransactions \\
    \hline
    303 & A header for the block section should not be marked as invalid. & \xmark & \cmark & ADProofs, Extension, BlockTransactions \\
    \hline
    305 & Block section should correspond to a block header that is not pruned yet. & \xmark & \cmark & ADProofs, Extension, BlockTransactions \\
    \hline
    306 & Size of block transactions section should not exceed <maxBlockSize>. & \cmark & \cmark & BlockTransactions \\
    \hline
    307 & Accumulated cost of block transactions should not exceed <maxBlockCost>. & \cmark & \cmark & ErgoTransaction, BlockTransactions \\
    \hline
\end{tabular}


\textbf{Extension validation:}


\begin{tabular}{ |p{1.0cm}||p{7.5cm}|p{1.0cm}|p{1.0cm}|p{2.5cm}| }
    \hline
Id & Validation rule & Soft-forkable & Active & Modifiers \\
\hline
    400 & Size of extension section should not exceed 32768. & \cmark & \cmark & Extension \\
    \hline
    401 & Interlinks should be packed properly. & \cmark & \cmark & Extension \\
    \hline
    402 & Interlinks should have the correct structure. & \cmark & \cmark & Extension \\
    \hline
    403 & Extension fields key length should be 2. & \xmark & \cmark & Extension \\
    \hline
    404 & Extension field value length should be <= 64. & \cmark & \cmark & Extension \\
    \hline
    405 & An extension should not contain duplicate keys. & \cmark & \cmark & Extension \\
    \hline
    406 & Extension of non-genesis block should not be empty. & \cmark & \cmark & Extension \\
    \hline
    407 & Voting for fork could be started only after activation period of a previous soft-fork. & \cmark & \cmark & Extension \\
    \hline
    408 & At the beginning of the epoch, the extension should contain correctly packed parameters. & \cmark & \cmark & Extension \\
    \hline
    409 & At the beginning of the epoch, the extension should contain all the system parameters. & \cmark & \cmark & Extension \\
    \hline
    410 & Versions in header and parameters section should be equal. & \cmark & \cmark & Extension \\
    \hline
    411 & At the beginning of the epoch, the extension should contain correctly packed validation settings. & \cmark & \cmark & Extension \\
    \hline
    412 & At the beginning of the epoch, the extension should contain all the validation settings. & \cmark & \cmark & Extension \\
    \hline
\end{tabular}


\textbf{Block application to state validation:}


\begin{tabular}{ |p{1.0cm}||p{7.5cm}|p{1.0cm}|p{1.0cm}|p{2.5cm}| }
    \hline
Id & Validation rule & Soft-forkable & Active & Modifiers \\
\hline
    500 & Operations against the state AVL+ tree should be successful. & \xmark & \cmark & ErgoFullBlock \\
    \hline
    501 & Calculated AVL+ digest should be equal to one written in the block header. & \xmark & \cmark & ErgoFullBlock \\
    \hline
\end{tabular}